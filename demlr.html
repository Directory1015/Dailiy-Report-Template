<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>DEMLR Monitoring</title>
  <meta name="description" content="DEMLR monitoring form — fill in the blanks and save drafts locally."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink:#0f172a; --bg:#ffffff; --card:#ffffff; --muted:#6b7280; --border:#e5e7eb; --accent:#0ea5e9; --danger:#ef4444; --ok:#16a34a;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    a{color:#0ea5e9;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}

    header{position:sticky;top:0;z-index:5;background:#fff;border-bottom:1px solid var(--border)}
    .top{display:flex;align-items:center;gap:14px;max-width:1100px;margin:0 auto;padding:14px 24px}
    .brand{font-weight:800}
    .actions{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
    button,.btn{border:1px solid var(--border);background:#fff;color:var(--ink);padding:10px 14px;border-radius:10px;cursor:pointer;display:inline-block;text-decoration:none}
    button:hover,.btn:hover{background:#f3f4f6}
    .btn.primary{background:var(--ink);color:#fff;border-color:var(--ink)}
    .btn.ok{background:var(--ok);color:#fff;border-color:var(--ok)}
    .btn.warn{background:#b45309;color:#fff;border-color:#b45309}
    .btn.ghost{background:#fff;border-color:var(--border)}
    .muted{color:var(--muted);font-size:12px}

    .grid{display:grid;gap:16px;grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 12;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px}
    .card h2{font-size:16px;margin:0 0 12px 0}
    .row{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin-bottom:10px}
    label{font-size:12px;color:var(--muted)}
    input,select,textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#fff;color:var(--ink)}
    textarea{min-height:110px;resize:vertical}
    .checklist{display:grid;gap:8px}
    .tools{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 0}

    table{width:100%;border-collapse:collapse}
    th,td{border:1px solid var(--border);padding:8px;text-align:left;vertical-align:top}
    th{background:#f8fafc}
    .small{font-size:12px;color:var(--muted)}
    .info{background:#f8fafc;border:1px solid var(--border);border-radius:10px;padding:10px}
    .tight td, .tight th{padding:6px}

    @media (max-width:900px){ .row{grid-template-columns:repeat(6,1fr)} }
    @media (max-width:600px){ .row{grid-template-columns:repeat(2,1fr)} }

    @media print{
      header,.actions,.tools,.btn{display:none !important}
      body{background:#fff !important;color:#000 !important}
      .card{break-inside:avoid;border:1px solid #000 !important}
      input,select,textarea{background:#fff !important;color:#000 !important;-webkit-text-fill-color:#000 !important;border:1px solid #000 !important}
      th,td{border-color:#000 !important;color:#000 !important}
      th{background:#fff !important;color:#000 !important}
      a{color:#000 !important;text-decoration:none}
    }
  </style>
</head>
<body>
  <header>
    <div class="top">
      <div class="brand">DEMLR Monitoring</div>
      <div class="actions">
        <a class="btn ghost" href="index.html">Home</a>
        <a class="btn ghost" href="daily.html">Daily Reports</a>
        <button type="button" class="btn primary" id="saveBtn">Save Draft</button>
        <button type="button" class="btn" id="newBtn">New</button>
        <button type="button" class="btn ok" id="printBtn">Print / PDF</button>
      </div>
    </div>
  </header>

  <div class="wrap">
    <section class="grid">
      <!-- Project Information (unchanged) -->
      <div class="card">
        <h2>Project Information</h2>
        <div class="row">
          <div style="grid-column:span 6">
            <label for="project_name">Project Name</label>
            <input id="project_name" />
          </div>
          <div style="grid-column:span 3">
            <label for="permit_no">Project/Permit #</label>
            <input id="permit_no"/>
          </div>
          <div style="grid-column:span 3">
            <label for="authority">Land Quality / Local Program (Approving Authority)</label>
            <input id="authority"/>
          </div>
        </div>
        <div class="row">
          <div style="grid-column:span 3"><label for="plan_approval">Date of Plan Approval</label><input id="plan_approval" type="date"/></div>
          <div style="grid-column:span 3"><label for="expiration">Expiration Date (if applicable)</label><input id="expiration" type="date"/></div>
          <div style="grid-column:span 3"><label for="coc_number">NCG010000 Certificate of Coverage #</label><input id="coc_number"/></div>
          <div style="grid-column:span 3"><label for="coc_date">Date of COC Issuance</label><input id="coc_date" type="date"/></div>
        </div>
        <div class="small">Coverage under the NCG010000 permit must be renewed annually, if issued after April 1, 2019 until Notice of Termination is filed and approved.</div>
      </div>

      <!-- Part 1A -->
      <div class="card">
        <h2>Part 1A — Rainfall Data (inches)</h2>
        <div class="row">
          <div style="grid-column:span 1"><label for="rain_mon">Mon</label><input id="rain_mon" type="number" step="0.01"></div>
          <div style="grid-column:span 1"><label for="rain_tue">Tue</label><input id="rain_tue" type="number" step="0.01"></div>
          <div style="grid-column:span 1"><label for="rain_wed">Wed</label><input id="rain_wed" type="number" step="0.01"></div>
          <div style="grid-column:span 1"><label for="rain_thu">Thu</label><input id="rain_thu" type="number" step="0.01"></div>
          <div style="grid-column:span 1"><label for="rain_fri">Fri</label><input id="rain_fri" type="number" step="0.01"></div>
          <div style="grid-column:span 1"><label for="rain_sat">Sat (Optional)</label><input id="rain_sat" type="number" step="0.01"></div>
          <div style="grid-column:span 1"><label for="rain_sun">Sun (Optional)</label><input id="rain_sun" type="number" step="0.01"></div>
        </div>
      </div>

      <!-- Part 1B -->
      <div class="card">
        <h2>Part 1B — Phase(s) of the Plan</h2>
        <div class="checklist">
          <label><input type="checkbox" id="phase_install"> Initial installation of erosion and sediment control measures</label>
          <label><input type="checkbox" id="phase_cg"> Clearing &amp; grubbing of existing ground cover</label>
          <label><input type="checkbox" id="phase_grading"> Completion of any grading that requires ground cover</label>
          <label><input type="checkbox" id="phase_complete"> Completion of all land-disturbing activity, construction or development</label>
          <label><input type="checkbox" id="phase_permcover"> Permanent ground cover sufficient to restrain erosion has been established</label>
        </div>
        <div class="row" style="margin-top:10px">
          <div style="grid-column:span 12">
            <label for="limits">Any site or project conditions that limit completion of inspection? If yes, explain areas that were inaccessible.</label>
            <textarea id="limits"></textarea>
          </div>
        </div>
      </div>

      <!-- Part 2A / 2B / 2C / 2D (unchanged content) -->
      <div class="card">
        <h2>Part 2 — Stormwater Plans &amp; Controls</h2>
        <div class="small">For each item, enter Y / N / N/A. All “No” items should be referenced and corrected in Part 3A.</div>

        <h3 class="small" style="margin-top:12px">Part 2A: Storm Water Plans and Related Documents</h3>
        <table class="tight" id="part2aTable">
          <thead><tr><th style="width:60px">Ref</th><th>Question</th><th style="width:70px">Yes</th><th style="width:70px">No</th><th style="width:70px">N/A</th></tr></thead>
          <tbody>
            <tr><td>A</td><td>Is the approval letter or certificate, COC and a copy of the NPDES CGP on site? (Electronic CGP acceptable)</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>B</td><td>Is the approved plan on site and current?</td><td><input/></td><td><input/></td><td><input/></td></tr>
          </tbody>
        </table>

        <h3 class="small" style="margin-top:12px">Part 2B: Stormwater Pollutant Controls</h3>
        <table class="tight" id="part2bTable">
          <thead><tr><th style="width:60px">Ref</th><th>Question</th><th style="width:70px">Yes</th><th style="width:70px">No</th><th style="width:70px">N/A</th></tr></thead>
          <tbody>
            <tr><td>C</td><td>Are erosion and sediment controls shown on the approved plan installed and operating properly with no repairs needed?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>D</td><td>Are stormwater controls shown on the approved plan installed and operating properly with no repairs needed?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>E</td><td>Vehicle Tracking: Are construction entrances operating properly with no repairs needed?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>F</td><td>Soil Stabilization: Are areas where construction activities have ceased properly stabilized within required timeframes?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>G</td><td>Are earthen stockpiles stabilized or otherwise protected, and located at least 50 ft away or downhill from drain inlets and surface waters?</td><td><input/></td><td><input/></td><td><input/></td></tr>
          </tbody>
        </table>

        <h3 class="small" style="margin-top:12px">Part 2C: Non-Storm Water Pollutant Controls</h3>
        <table class="tight" id="part2cTable">
          <thead><tr><th style="width:60px">Ref</th><th>Question</th><th style="width:70px">Yes</th><th style="width:70px">No</th><th style="width:70px">N/A</th></tr></thead>
          <tbody>
            <tr><td>H</td><td>Concrete, stucco, paint, etc. washouts: Installed, properly located, posted and operating with no repairs needed?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>I</td><td>Solid &amp; hazardous wastes: Are trash, debris, and hazardous materials properly managed?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>J</td><td>Sanitary waste: Are portable toilets properly located and operating with no visible repairs needed?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>K</td><td>Equipment and stored fluids: Are fuels, lubricants, hydraulic fluids, etc. contained so as not to enter surface and ground waters?</td><td><input/></td><td><input/></td><td><input/></td></tr>
          </tbody>
        </table>
        <div class="small info" style="margin-top:8px">Report oil spills and releases of hazardous substances to the appropriate DEQ Regional Office within 24 hours of discovery.</div>

        <h3 class="small" style="margin-top:12px">Part 2D: Sedimentation</h3>
        <table class="tight" id="part2dTable">
          <thead><tr><th style="width:60px">Ref</th><th>Question</th><th style="width:70px">Yes</th><th style="width:70px">No</th><th style="width:70px">N/A</th></tr></thead>
          <tbody>
            <tr><td>L</td><td>Are sediment or other pollutants noted beyond the approved/permitted limits of disturbance?</td><td><input/></td><td><input/></td><td><input/></td></tr>
            <tr><td>M</td><td>Are BMPs detected as releasing sediment or other pollutants into receiving waters?</td><td><input/></td><td><input/></td><td><input/></td></tr>
          </tbody>
        </table>
        <div class="small info" style="margin-top:8px">Report visible sedimentation into streams or wetlands to the appropriate DEQ Regional Office within 24 hours of discovery.</div>
      </div>

      <!-- Part 3A -->
      <div class="card">
        <h2>Part 3A — Erosion &amp; Sedimentation Control Measures</h2>
        <div class="small">Inspect at least once per 7 calendar days and within 24 hours of ≥ 1.0" rainfall in 24 hours.</div>
        <div class="tools">
          <button type="button" class="btn" id="addP3aRow">+ Add Row</button>
          <button type="button" class="btn ghost" id="clearP3a">Clear</button>
        </div>
        <div style="overflow:auto;margin-top:8px">
          <table id="part3aTable">
            <thead>
              <tr>
                <th>Measure ID / Location and Description</th>
                <th>Reference(s)</th>
                <th>Operating Properly? (Y/N)</th>
                <th>Inspection Date</th>
                <th>Describe Actions Needed</th>
                <th>Date Previous Action(s) Observed as Corrected</th>
                <th style="width:56px">—</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <p class="small" style="margin-top:10px">
          Report unanticipated bypasses or non-compliance conditions that may endanger health or the environment to the appropriate DEQ Regional Office within 24 hours of discovery.
        </p>
      </div>

      <!-- Part 3B -->
      <div class="card">
        <h2>Part 3B — Stormwater Discharge Outfalls (SDOs)</h2>
        <div class="small">Inspect at least once per 7 calendar days and within 24 hours of ≥ 1.0" rainfall in 24 hours.</div>
        <div class="tools">
          <button type="button" class="btn" id="addP3bRow">+ Add Row</button>
          <button type="button" class="btn ghost" id="clearP3b">Clear</button>
        </div>
        <div style="overflow:auto;margin-top:8px">
          <table id="part3bTable">
            <thead>
              <tr>
                <th>Stormwater Discharge Outfall ID / Location</th>
                <th>Any Visible Sedimentation in Streams/Wetlands/Outside Site Limits? (Y/N)</th>
                <th>Any Increase in Stream Turbidity from Discharge? (Y/N)</th>
                <th>Any Visible Erosion below SDO? (Y/N)</th>
                <th>Any visible oil sheen / floating or suspended solids / discoloration? (Y/N)</th>
                <th>Inspection Date</th>
                <th>Describe Actions Needed</th>
                <th>Date Previous Action(s) Observed as Corrected</th>
                <th style="width:56px">—</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Part 3C -->
      <div class="card">
        <h2>Part 3C — Ground Stabilization</h2>
        <div class="small">Must be recorded, at a minimum, after each phase. Add rows as needed.</div>
        <div class="tools">
          <button type="button" class="btn" id="addP3cRow">+ Add Row</button>
          <button type="button" class="btn ghost" id="clearP3c">Clear</button>
        </div>
        <div style="overflow:auto;margin-top:8px">
          <table id="part3cTable">
            <thead>
              <tr>
                <th>Site area description and location where activities have temporarily or permanently ceased</th>
                <th>Time Limit for Ground Cover</th>
                <th>Have stabilization measures been installed? (Y/N)</th>
                <th>Temporary or Permanent (T/P)</th>
                <th>Is Ground Cover sufficient to restrain erosion? (Y/N)</th>
                <th>Original Inspection Date</th>
                <th>Describe Actions Needed</th>
                <th>Date Previous Action(s) Observed as Corrected</th>
                <th style="width:56px">—</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Part 3D -->
      <div class="card">
        <h2>Part 3D — New or Revised Measures</h2>
        <div class="small">Document measures omitted/installed/altered/relocated/removed since last inspection. Add rows as needed. Corrective actions should be included in Part 3A.</div>
        <div class="tools">
          <button type="button" class="btn" id="addP3dRow">+ Add Row</button>
          <button type="button" class="btn ghost" id="clearP3d">Clear</button>
        </div>
        <div style="overflow:auto;margin-top:8px">
          <table id="part3dTable">
            <thead>
              <tr>
                <th>Measure ID or Location and Description</th>
                <th>Proposed Dimensions (ft.)</th>
                <th>Actual Dimensions (ft.)</th>
                <th>Significant Deviation from Plan? (Y/N)</th>
                <th>Date measure observed as installed / altered / relocated / removed</th>
                <th>Installed (I) / Altered (A) / Relocated (R) / Removed (X)</th>
                <th style="width:56px">—</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="small">*Significant deviation means any omission, alteration or relocation of a measure that prevents it from performing as intended.</div>
      </div>

      <!-- Signature -->
      <div class="card">
        <h2>Part 4 — Signature of Inspector</h2>
        <div class="row">
          <div style="grid-column:span 4"><label for="inspector_name">Inspector Name</label><input id="inspector_name"/></div>
          <div style="grid-column:span 4"><label for="employer">Employer</label><input id="employer"/></div>
          <div style="grid-column:span 4"><label for="inspector_type">Inspector Type</label><select id="inspector_type"><option>FRP/Permittee</option><option>Agent/Designee</option></select></div>
        </div>
        <div class="row">
          <div style="grid-column:span 3"><label for="address">Address</label><input id="address"/></div>
          <div style="grid-column:span 3"><label for="county">County</label><input id="county"/></div>
          <div style="grid-column:span 3"><label for="phone">Phone Number</label><input id="phone"/></div>
          <div style="grid-column:span 3"><label for="email">Email Address</label><input id="email" type="email"/></div>
        </div>
        <div class="row">
          <div style="grid-column:span 4"><label for="inspection_dt">Date &amp; Time of Inspection</label><input id="inspection_dt" type="datetime-local"/></div>
        </div>
      </div>

      <!-- History -->
      <div class="card">
        <h2>Saved DEMLR Drafts (this browser)</h2>
        <div class="tools">
          <button type="button" class="btn warn" id="wipeAll">Delete All Drafts</button>
          <span class="muted">(Drafts save to your browser only.)</span>
        </div>
        <div id="history"></div>
      </div>
    </section>
  </div>

  <!-- Error toast so you see if anything crashes -->
  <script>
    window.addEventListener('error', function(e){
      var t=document.createElement('div');
      t.textContent='Script error: '+(e && e.message ? e.message : 'unknown');
      t.style.position='fixed';t.style.left='16px';t.style.bottom='16px';
      t.style.padding='8px 12px';t.style.background='#b91c1c';t.style.color='#fff';
      t.style.borderRadius='8px';t.style.zIndex=9999;
      document.body.appendChild(t); setTimeout(function(){t.remove();}, 5000);
    });
  </script>

  <script src="assets/demlr.js"></script>

  <!-- Health check: warns if assets/demlr.js failed to load -->
  <script>
    setTimeout(function(){
      if(!window.__DEMLR_JS_READY){
        var n=document.createElement('div');
        n.textContent='Heads up: DEMLR JS did not load. Check path: assets/demlr.js';
        n.style.position='fixed';n.style.right='16px';n.style.bottom='16px';
        n.style.padding='8px 12px';n.style.background='#f59e0b';n.style.color='#111';
        n.style.borderRadius='8px';n.style.zIndex=9999;
        document.body.appendChild(n); setTimeout(function(){n.remove();}, 7000);
      }
    }, 400);
  </script>
</body>
</html>
